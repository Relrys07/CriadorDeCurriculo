<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor de Curriculum</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- ESTILOS GERAIS --- */
        :root {
            --primary-color: #2c3e50;
            --bg-editor: #f0f4f8;
            --paper-width: 210mm;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: var(--bg-editor);
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- EDITOR (ESQUERDA) --- */
        .editor-pane {
            width: 440px;
            background: #fff;
            height: 100%;
            overflow-y: auto;
            border-right: 1px solid #cddde8;
            display: flex;
            flex-direction: column;
            box-shadow: 4px 0 15px rgba(0,0,0,0.05);
            z-index: 20;
        }

        .editor-content { padding: 25px; padding-bottom: 120px; }
        
        h2.editor-title { color: #2c3e50; font-family: 'Montserrat', sans-serif; margin-top: 0; font-size: 22px; display: flex; align-items: center; gap: 10px;}
        h3.section-header { font-size: 13px; text-transform: uppercase; color: #8898aa; border-bottom: 1px solid #eee; padding-bottom: 5px; margin-top: 35px; letter-spacing: 1px; font-weight: 700;}

        /* Dicas de RH */
        .hr-tip {
            font-size: 11px; color: #666; background: #fff8e1; padding: 8px; 
            border-left: 3px solid #ffc107; margin-bottom: 10px; border-radius: 0 4px 4px 0;
            line-height: 1.4;
        }

        .input-group { margin-bottom: 18px; }
        .input-group label { display: block; font-weight: 600; font-size: 13px; color: #444; margin-bottom: 6px; }
        
        .input-control {
            width: 100%; padding: 12px; border: 1px solid #dae1e7; border-radius: 6px;
            font-size: 14px; box-sizing: border-box; background: #fdfdfd; transition: 0.2s;
        }
        .input-control:focus { border-color: var(--primary-color); outline: none; background: white; box-shadow: 0 0 0 3px rgba(44, 62, 80, 0.1);}
        
        /* Bot√µes de Sugest√£o */
        .suggestion-chips { display: flex; flex-wrap: wrap; gap: 5px; margin-top: 5px; }
        .chip {
            background: #eef2f7; color: #555; padding: 4px 10px; border-radius: 15px; 
            font-size: 11px; cursor: pointer; border: 1px solid #dae1e7; transition: 0.2s;
        }
        .chip:hover { background: #dceefb; color: #007bff; border-color: #b8daff; }

        /* Bot√£o de Foto */
        .photo-btn-label {
            display: flex; align-items: center; justify-content: center; gap: 10px;
            background-color: #eef2f7; color: #555; padding: 15px; border: 1px dashed #ccc;
            border-radius: 6px; cursor: pointer; font-weight: 600; transition: background 0.2s;
        }
        .photo-btn-label:hover { background-color: #e2e6ea; border-color: #999; }

        /* Bot√µes de A√ß√£o */
        .btn { border: none; padding: 12px; border-radius: 6px; cursor: pointer; font-weight: 600; width: 100%; margin-top: 8px; font-size: 13px;}
        .btn-add { background: #f1f3f5; color: #495057; border: 1px solid #ced4da; }
        .btn-add:hover { background: #e9ecef; }
        .btn-print { background: #27ae60; color: white; margin-top: 25px; font-size: 16px; padding: 16px; box-shadow: 0 4px 6px rgba(39, 174, 96, 0.2);}
        .btn-print:hover { background: #219150; }
        .btn-reset { background: transparent; color: #e74c3c; border: 1px solid #e74c3c; opacity: 0.7;}
        .btn-reset:hover { opacity: 1; background: #fff5f5; }

        /* Color Picker */
        .color-options { display: flex; gap: 10px; margin-bottom: 20px; padding: 5px; background: #f8f9fa; border-radius: 30px; width: fit-content; }
        .color-circle { 
            width: 24px; height: 24px; border-radius: 50%; cursor: pointer; 
            border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2); 
        }

        /* --- PREVIEW (DIREITA) --- */
        .preview-pane {
            flex: 1; background: #525659; padding: 40px;
            overflow-y: auto; display: flex; justify-content: center;
        }

        #resume-paper {
            width: var(--paper-width); min-height: 297mm; background: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3); display: grid;
            grid-template-columns: 32% 68%;
            position: relative;
        }
        #resume-paper.with-sidebar-bg { background: linear-gradient(to right, var(--primary-color) 32%, white 32%); }

        .left-col { padding: 35px 25px; color: white; }
        .profile-container {
            width: 140px; height: 140px; margin: 0 auto 30px auto;
            border-radius: 50%; overflow: hidden; border: 4px solid rgba(255,255,255,0.2);
            display: none; background: #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .profile-img { width: 100%; height: 100%; object-fit: cover; }

        .sidebar-title {
            font-family: 'Montserrat', sans-serif; text-transform: uppercase; font-size: 13px;
            border-bottom: 1px solid rgba(255,255,255,0.3); padding-bottom: 8px; margin-bottom: 15px;
            letter-spacing: 1px; font-weight: 700; opacity: 0.9;
        }
        .contact-row { font-size: 13px; margin-bottom: 12px; display: flex; align-items: center; gap: 12px; line-height: 1.4; }
        .skill-tag { display: inline-block; background: rgba(255,255,255,0.15); color: white; padding: 4px 10px; border-radius: 4px; font-size: 12px; margin: 0 5px 6px 0; }

        .right-col { padding: 45px 40px; }
        .name-header { font-family: 'Montserrat', sans-serif; font-weight: 700; color: var(--primary-color); line-height: 1.1; text-transform: uppercase; margin: 0; }
        .role-header { font-size: 18px; color: #666; margin: 8px 0 30px 0; font-weight: 500; letter-spacing: 0.5px; }

        .main-title {
            font-family: 'Montserrat', sans-serif; color: var(--primary-color); font-size: 15px; 
            font-weight: 700; text-transform: uppercase; 
            border-bottom: 2px solid #f0f0f0; padding-bottom: 8px; margin-bottom: 18px; letter-spacing: 0.5px;
        }
        .summary-content { color: #444; line-height: 1.7; font-size: 14px; text-align: justify;}

        /* Itens de Experi√™ncia e Educa√ß√£o */
        .dynamic-card { background: #fff; padding: 15px; border: 1px solid #e9ecef; margin-bottom: 12px; border-radius: 6px; position: relative; box-shadow: 0 2px 4px rgba(0,0,0,0.02);}
        .btn-delete-card { position: absolute; top: 12px; right: 12px; color: #e74c3c; cursor: pointer; }

        .item-block { margin-bottom: 22px; page-break-inside: avoid; }
        .item-title { font-weight: 700; font-size: 15px; color: #222; }
        .item-subtitle { font-weight: 600; color: #555; font-size: 14px; margin-bottom: 2px; }
        .item-date { font-style: italic; color: #888; font-size: 13px; display: block; margin-bottom: 8px; }
        .item-desc { font-size: 14px; line-height: 1.6; color: #444; white-space: pre-line; }

        @media print {
            body { display: block; background: white; margin: 0; padding: 0; }
            .editor-pane { display: none; }
            .preview-pane { display: block; width: 100%; padding: 0; margin: 0; background: white; }
            #resume-paper { box-shadow: none; margin: 0; width: 100%; height: auto; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            @page { margin: 0; }
        }
    </style>
</head>
<body>

    <div class="editor-pane">
        <div class="editor-content">
            <h2 class="editor-title"><i class="fa-solid fa-file-pen"></i> Editor de Curriculum</h2>
            <div style="font-size: 11px; color: #777; margin-bottom: 15px;">Seus dados ficam salvos apenas no seu navegador.</div>

            <div class="color-options">
                <div class="color-circle" style="background:#2c3e50" onclick="updateColor('#2c3e50')"></div>
                <div class="color-circle" style="background:#0F52BA" onclick="updateColor('#0F52BA')"></div>
                <div class="color-circle" style="background:#b91c1c" onclick="updateColor('#b91c1c')"></div>
                <div class="color-circle" style="background:#035914" onclick="updateColor('#035914')"></div>
                <div class="color-circle" style="background:#4b0082" onclick="updateColor('#4b0082')"></div>
            </div>

            <div class="input-group">
                <label for="photoInput" class="photo-btn-label">
                    <i class="fa-solid fa-camera"></i> <span>Clique para adicionar foto</span>
                </label>
                <input type="file" id="photoInput" hidden accept="image/*" onchange="uploadPhoto(this)">
                <div style="display:flex; justify-content: flex-end;">
                     <button onclick="removePhoto()" style="border:none; background:none; color: #e74c3c; font-size: 11px; cursor: pointer; margin-top:5px; display:none;" id="btnRemovePhoto">Remover foto</button>
                </div>
            </div>

            <h3 class="section-header">Sobre Voc√™</h3>
            <div class="input-group">
                <label>Nome Completo</label>
                <input type="text" class="input-control" id="inpName" placeholder="Ex: Ana Silva" oninput="refresh()">
                <div style="display:flex; justify-content:space-between; margin-top:5px;">
                    <label style="font-weight:normal; font-size:11px;">Tamanho:</label>
                    <input type="range" id="inpNameSize" min="24" max="50" value="36" style="width:70%" oninput="refresh()">
                </div>
            </div>

            <div class="input-group">
                <label>Cargo / Objetivo</label>
                <input type="text" class="input-control" id="inpRole" placeholder="Ex: Analista Financeiro S√™nior" oninput="refresh()">
            </div>

            <div class="input-group">
                <label>Contatos</label>
                <input type="text" class="input-control" placeholder="Email Profissional" id="inpEmail" oninput="refresh()">
                <input type="text" class="input-control" placeholder="Telefone / WhatsApp" id="inpPhone" style="margin-top:5px" oninput="refresh()">
                <input type="text" class="input-control" placeholder="Cidade - UF" id="inpAddr" style="margin-top:5px" oninput="refresh()">
                <input type="text" class="input-control" placeholder="LinkedIn ou Portf√≥lio (URL)" id="inpLink" style="margin-top:5px" oninput="refresh()">
            </div>

            <h3 class="section-header">Resumo Profissional</h3>
            <div class="hr-tip">üí° **Dica de RH:** Resuma em 3 linhas: Quem voc√™ √© + Principais conquistas + O que busca.</div>
            <div class="input-group">
                <textarea class="input-control" id="inpSummary" style="height:100px" 
                placeholder="Ex: Profissional com 5 anos de experi√™ncia em vendas. Aumentei o faturamento da empresa X em 30%. Busco oportunidade para liderar equipes..." oninput="refresh()"></textarea>
            </div>

            <h3 class="section-header">Compet√™ncias / Idiomas</h3>
            <div class="input-group">
                <label>Adicionar Skills</label>
                <input type="text" class="input-control" id="inpSkills" placeholder="Digite e aperte v√≠rgula..." oninput="refresh()">
                <div style="font-size:11px; margin-top:5px; color:#666">Sugest√µes (Clique para adicionar):</div>
                <div class="suggestion-chips">
                    <span class="chip" onclick="addSuggestion('Lideran√ßa')">Lideran√ßa</span>
                    <span class="chip" onclick="addSuggestion('Ingl√™s Avan√ßado')">Ingl√™s Avan√ßado</span>
                    <span class="chip" onclick="addSuggestion('Excel Avan√ßado')">Excel Avan√ßado</span>
                    <span class="chip" onclick="addSuggestion('Comunica√ß√£o')">Comunica√ß√£o</span>
                    <span class="chip" onclick="addSuggestion('Trabalho em Equipe')">Trabalho em Equipe</span>
                    <span class="chip" onclick="addSuggestion('Resolu√ß√£o de Problemas')">Resolu√ß√£o de Problemas</span>
                </div>
            </div>

            <h3 class="section-header">Experi√™ncia Profissional</h3>
            <div class="hr-tip">üí° **Dica:** Use verbos de a√ß√£o (Criei, Liderei, Melhorei) e tente incluir n√∫meros e resultados.</div>
            <div id="editorExpList"></div>
            <button class="btn btn-add" onclick="addExp()">+ Adicionar Experi√™ncia</button>

            <h3 class="section-header">Forma√ß√£o Acad√™mica</h3>
            <div id="editorEduList"></div>
            <button class="btn btn-add" onclick="addEdu()">+ Adicionar Curso/Forma√ß√£o</button>


            <button class="btn btn-print" onclick="window.print()"><i class="fa-solid fa-file-arrow-down"></i> Salvar PDF</button>
            <button class="btn btn-reset" onclick="resetData()">Apagar e Come√ßar do Zero</button>
            <h6> Builder V10.0 Relrys Alves </h6> 
         
        </div>
    </div>

    <div class="preview-pane">
        <div id="resume-paper" class="with-sidebar-bg">
            
            <div class="left-col">
                <div class="profile-container" id="viewPhotoContainer">
                    <img src="" class="profile-img" id="viewPhoto">
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-title">Contato</div>
                    <div class="contact-row" id="viewEmail"><i class="fa-solid fa-envelope"></i> <span></span></div>
                    <div class="contact-row" id="viewPhone"><i class="fa-solid fa-phone"></i> <span></span></div>
                    <div class="contact-row" id="viewAddr"><i class="fa-solid fa-location-dot"></i> <span></span></div>
                    <div class="contact-row" id="viewLink"><i class="fa-brands fa-linkedin"></i> <span></span></div>
                </div>

                <div class="sidebar-section" id="secSkills">
                    <div class="sidebar-title">Compet√™ncias</div>
                    <div id="viewSkills"></div>
                </div>
            </div>

            <div class="right-col">
                <h1 class="name-header" id="viewName">Seu Nome</h1>
                <div class="role-header" id="viewRole">Cargo</div>

                <div class="main-section" id="secSummary">
                    <div class="main-title">Perfil Profissional</div>
                    <div class="summary-content" id="viewSummary"></div>
                </div>

                <div class="main-section" id="secExp">
                    <div class="main-title">Experi√™ncia Profissional</div>
                    <div id="viewExpList"></div>
                </div>

                <div class="main-section" id="secEdu">
                    <div class="main-title">Forma√ß√£o Acad√™mica</div>
                    <div id="viewEduList"></div>
                </div>
            </div>
            

        </div>
    </div>
          

    <script>
        // --- DADOS ---
        const defaultData = {
            color: '#2c3e50', nameSize: 36, photo: '',
            name: '', role: '', email: '', phone: '', addr: '', link: '',
            summary: '', skills: '',
            experiences: [], education: []
        };

        // Mudamos a chave do localStorage para V10 para n√£o misturar dados antigos.
        let data = JSON.parse(localStorage.getItem('cv_v10')) || defaultData;

        window.onload = function() {
            loadDataToInputs();
            refresh();
        };

        function saveData() {
            localStorage.setItem('cv_v10', JSON.stringify(data));
        }

        // --- ATUALIZA√á√ÉO E RENDERIZA√á√ÉO ---
        function refresh() {
            // Inputs Fixos
            data.name = document.getElementById('inpName').value;
            data.nameSize = document.getElementById('inpNameSize').value;
            data.role = document.getElementById('inpRole').value;
            data.email = document.getElementById('inpEmail').value;
            data.phone = document.getElementById('inpPhone').value;
            data.addr = document.getElementById('inpAddr').value;
            data.link = document.getElementById('inpLink').value;
            data.summary = document.getElementById('inpSummary').value;
            data.skills = document.getElementById('inpSkills').value;

            // Renderizar Styles
            document.documentElement.style.setProperty('--primary-color', data.color);
            
            // Renderizar Textos
            const nameEl = document.getElementById('viewName');
            nameEl.innerText = data.name || "Seu Nome";
            nameEl.style.fontSize = data.nameSize + "px";

            document.getElementById('viewRole').innerText = data.role || "Cargo";
            document.getElementById('viewSummary').innerText = data.summary;
            document.getElementById('secSummary').style.display = data.summary ? 'block' : 'none';

            // Contatos
            toggleContact('viewEmail', data.email, 'fa-solid fa-envelope');
            toggleContact('viewPhone', data.phone, 'fa-solid fa-phone');
            toggleContact('viewAddr', data.addr, 'fa-solid fa-location-dot');
            toggleContact('viewLink', data.link, 'fa-brands fa-linkedin');

            // Skills
            const skillsContainer = document.getElementById('viewSkills');
            skillsContainer.innerHTML = "";
            if(data.skills) {
                data.skills.split(',').forEach(s => {
                    if(s.trim()) {
                        const tag = document.createElement('span');
                        tag.className = 'skill-tag';
                        tag.innerText = s.trim();
                        skillsContainer.appendChild(tag);
                    }
                });
                document.getElementById('secSkills').style.display = 'block';
            } else {
                document.getElementById('secSkills').style.display = 'none';
            }

            // Listas
            renderListPreview(data.experiences, 'viewExpList', 'secExp');
            renderListPreview(data.education, 'viewEduList', 'secEdu');

            // Foto
            const imgContainer = document.getElementById('viewPhotoContainer');
            const btnRemove = document.getElementById('btnRemovePhoto');
            if(data.photo) {
                document.getElementById('viewPhoto').src = data.photo;
                imgContainer.style.display = 'block';
                btnRemove.style.display = 'block';
            } else {
                imgContainer.style.display = 'none';
                btnRemove.style.display = 'none';
            }

            saveData();
        }

        function toggleContact(id, val, iconClass) {
            const el = document.getElementById(id);
            if(val) { 
                el.style.display = 'flex'; 
                el.querySelector('span').innerText = val; 
                el.querySelector('i').className = iconClass; // Garante o √≠cone correto
            } 
            else { el.style.display = 'none'; }
        }

        function renderListPreview(array, containerId, sectionId) {
            const list = document.getElementById(containerId);
            list.innerHTML = "";
            if(array.length === 0) {
                document.getElementById(sectionId).style.display = 'none';
                return;
            }
            document.getElementById(sectionId).style.display = 'block';
            
            array.forEach(item => {
                const div = document.createElement('div');
                div.className = 'item-block';
                div.innerHTML = `
                    <div class="item-title">${item.title}</div>
                    <div class="item-subtitle">${item.subtitle}</div>
                    <span class="item-date">${item.date}</span>
                    <div class="item-desc">${item.desc || ''}</div>
                `;
                list.appendChild(div);
            });
        }

        function loadDataToInputs() {
            document.getElementById('inpName').value = data.name;
            document.getElementById('inpNameSize').value = data.nameSize || 36;
            document.getElementById('inpRole').value = data.role;
            document.getElementById('inpEmail').value = data.email;
            document.getElementById('inpPhone').value = data.phone;
            document.getElementById('inpAddr').value = data.addr;
            document.getElementById('inpLink').value = data.link;
            document.getElementById('inpSummary').value = data.summary;
            document.getElementById('inpSkills').value = data.skills;
            
            renderEditorList('exp');
            renderEditorList('edu');
        }

        // --- FUN√á√ïES DE INTERA√á√ÉO ---
        function uploadPhoto(input) {
            const file = input.files[0];
            if(!file) return;
            if(file.size > 2 * 1024 * 1024) { alert("Imagem muito grande (Max 2MB)"); return; }
            const reader = new FileReader();
            reader.onloadend = function() { data.photo = reader.result; refresh(); }
            reader.readAsDataURL(file);
        }
        function removePhoto() { data.photo = ''; document.getElementById('photoInput').value = ''; refresh(); }
        function updateColor(c) { data.color = c; refresh(); }

        function addSuggestion(text) {
            const input = document.getElementById('inpSkills');
            if(input.value) {
                // Previne adicionar se j√° existir
                const skillsArray = input.value.split(',').map(s => s.trim().toLowerCase());
                if (!skillsArray.includes(text.toLowerCase())) {
                    input.value += `, ${text}`;
                }
            } else {
                input.value = text;
            }
            refresh();
        }

        // --- LISTAS DIN√ÇMICAS (EXPERI√äNCIA E EDUCA√á√ÉO) ---
        function addExp() {
            data.experiences.push({ title: 'Cargo', subtitle: 'Empresa', date: '', desc: '' });
            renderEditorList('exp'); refresh();
        }
        function addEdu() {
            data.education.push({ title: 'Nome do Curso', subtitle: 'Institui√ß√£o', date: '', desc: '' });
            renderEditorList('edu'); refresh();
        }

        function removeItem(type, index) {
            if(type === 'exp') data.experiences.splice(index, 1);
            if(type === 'edu') data.education.splice(index, 1);
            renderEditorList(type); refresh();
        }

        function updateItem(type, index, field, val) {
            if(type === 'exp') data.experiences[index][field] = val;
            if(type === 'edu') data.education[index][field] = val;
            refresh();
        }

        function renderEditorList(type) {
            const listArr = type === 'exp' ? data.experiences : data.education;
            const container = document.getElementById(type === 'exp' ? 'editorExpList' : 'editorEduList');
            const ph = type === 'exp' 
                ? {t: 'Cargo (Ex: Vendedor)', s: 'Empresa', d: 'Per√≠odo', desc: 'Dica: Comece frases com verbos. "Aumentei", "Criei", "Gerenciei".'} 
                : {t: 'Nome do Curso (Ex: Eng. Civil)', s: 'Institui√ß√£o (Ex: USP)', d: 'Ano de Conclus√£o', desc: 'Detalhes opcionais'};

            container.innerHTML = "";
            listArr.forEach((item, i) => {
                const div = document.createElement('div');
                div.className = 'dynamic-card';
                div.innerHTML = `
                    <span class="btn-delete-card" onclick="removeItem('${type}', ${i})"><i class="fa-solid fa-trash"></i></span>
                    <input class="input-control" style="margin-bottom:5px; font-weight:bold" placeholder="${ph.t}" value="${item.title}" oninput="updateItem('${type}', ${i}, 'title', this.value)">
                    <input class="input-control" style="margin-bottom:5px" placeholder="${ph.s}" value="${item.subtitle}" oninput="updateItem('${type}', ${i}, 'subtitle', this.value)">
                    <input class="input-control" style="margin-bottom:5px" placeholder="${ph.d}" value="${item.date}" oninput="updateItem('${type}', ${i}, 'date', this.value)">
                    <textarea class="input-control" style="min-height:60px" placeholder="${ph.desc}" oninput="updateItem('${type}', ${i}, 'desc', this.value)">${item.desc}</textarea>
                `;
                container.appendChild(div);
            });
        }

        function resetData() {
            if(confirm("Tem certeza? Isso apagar√° tudo.")) {
                localStorage.removeItem('cv_v10');
                location.reload();
            }
        }
    </script>
    
</body>


</html>